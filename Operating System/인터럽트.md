# 인터럽트

### 🧨 인터럽트 (Interrupt)

프로그램을 실행하는 도중에 예기치 않은 상황이 발생할 경우, 현재 실행 중인 작업을 즉시 중단하고 발생된 상황에 대한 우선 처리가 필요함을 CPU에게 알리는 것이다. 지금 수행 중인 일보다 더 중요한 일이 발생하면 그 일을 먼저 처리하고, 하던 일을 이어서 한다.

**외부 인터럽트** : 입출력 장치, 타이밍 장치, 전원 등 외부적인 요인으로 발생

- 입출력 인터럽트 : 입출력 작업의 종료나 입출력의 오류에 의해 발생하는 인터럽트
- 전원이상 인터럽트 : 정전이나 전원공급의 이상으로 인해 발생하는 인터럽트
- 기계 착오 인터럽트 : CPU의 기능적인 오류
- 외부 신호 인터럽트 : I/O 장치가 아닌 오퍼레이터나 타이머에 의해 의도적으로 프로그램이 중단된 경우

**내부 인터럽트** : 잘못된 명령이나 데이터 사용할 때 발생

- 프로그램 검사 인터럽트 : 오버플로우, 언더플로우, 명령어 잘못 사용한 경우 발생하는 인터럽트

**소프트웨어 인터럽트** : 프로그램 처리 중 명령의 요청에 의해 발생한 것

- SVC 인터럽트 : 사용자가 SVC 명령을 써서 의도적으로 호출한 경우, 복잡한 입출력 처리를 해야하는 경우

  > SVC : SuperVisor Call

</br>

</br>

### 인터럽트 발생 시 처리과정

1. 프로그램 실행 중단
2. 현재의 프로그램 상태 보존 (Context Switching)
3. 인터럽트 처리
4. 입터럽트 서비스 루틴 실행
5. 인터럽트 요청 신호가 발생했을 때, 보관한 PC의 값을 다시 PC에 저장
6. PC의 값을 이용하여 인터럽트 발생 이전에 수행중이던 프로그램 계속 실행

</br>

</br>

### 폴링

CPU가 작업을 진행하다가 입출력 명령을 만나면 직접 입출력 장치에서 데이터를 가져오는 방식이다. 시간이 오래 걸리며 작업 효율이 떨어지므로 인터럽트 방식을 사용한다.

**폴링과 인터럽트**

- 폴링 방식 : 사용자가 명령어를 사용해 입력 핀의 값을 계속 읽어 변화를 알아내는 방식

  > 인터럽트 요청 플래그를 차례로 비교하여 우선순위가 가장 높은 인터럽트 자원을 찾아서 이에 맞는 인터럽트 서비스 루틴을 수행한다.

- 인터럽트 방식 : MCU 자체가 하드웨어적으로 변화를 체크하여 변화 시에만 일정한 동작을 하는 방식

  - Daisy Chain : (직렬 우선순위 부여) : 인터럽트가 발생하는 모든 장치를 한 개의 회선에 직렬로 연결하여 우선순위가 높은 장치를 맨 앞에 위치시켜서 우선 순위에 따라 연결한다.
  
  - 병렬 우선순위 부여