# IPC

### IPC (Inter-Process Communication)

IPC = 프로세스 간 통신

프로세스는 독립적으로 실행된다. 각 프로세스는 다른 프로세스의 영향을 받지 않는다. (스레드는 자원을 공유하므로 서로 영향을 받음)

이러한 독립적 구조를 가진 프로세스 간의 통신을 해야할 때, 사용하는 것이 IPC 통신이다. IPC는 종류가 여러가지 있는데, 필요에 따라 선택해서 사용할 수 있다.

</br>

</br>

### IPC 종류

**익명 PIPE**

파이프는 두 개의 프로세스를 연결하는데 하나의 프로세스는 데이터를 쓰기만 하고, 다른 하나는 데이터를 읽기만 할 수 있다. 즉 한쪽 방향으로만 통신이 가능한 반이중 통신이다. 양쪽으로 모두 송/수신하고 싶으면 2개의 파이프를 만들어야 한다. 익명 PIPE는 통신할 프로세스를 명확히 알 수 있는 경우에 사용한다.

</br>

**Named PIPE(FIFO)**

전혀 모르는 상태의 프로세스들이 통신할 때, 사용한다. 부모 프로세스와 전혀 무관한 다른 프로세스도 통신이 가능하다. (통신을 위해 이름 있는 파이프 사용)

하지만 Named PIPE도 프로세스가 데이터를 동시에 읽고 쓰는 것이 불가능하다.

</br>

**Message Queue**

입출력 방식은 Named PIPE와 동일하다. 다른 점은 메시지 큐는 데이터의 흐름이 아닌 메모리 공간이라는 것이다. 사용할 데이터에 번호를 붙이면서 여러 프로세스가 동시에 데이터를 쉽게 다룰 수 있다. 송신 프로세스는 큐에 `enqueue`, 수신 프로세스는 큐에 `dequeue`하며 상호 간 통신한다.

</br>

**공유 메모리**

파이프와 메시지 큐가 통신을 이용한 설비라면, 공유 메모리는 데이터 자체를 공유하도록 지원하는 설비이다. 프로세스의 메모리 영역은 독립적이며 다른 프로세스가 접근하지 못하도록 보호되어야 한다. 하지만 다른 프로세스가 데이터를 사용하도록 해야하는 경우가 있을 수 있다. 공유 메모리는 프로세스 간 메모리 영역을 공유해서 사용할 수 있도록 허용해주는 것이다.

프로세스가 공유 메모리 할당을 커널에 요청하면, 커널은 해당 프로세스에 메모리 공간을 할당해주고 이후 모든 프로세스는 해당 메모리 영역에 접근할 수 있게 된다. 

공유 메모리는 IPC 중에 가장 빠르게 작동한다.

</br>

**메모리 맵**

공유 메모리처럼 메모리를 공유해준다. 열린 파일을 메모리에 맵핑시켜서 공유하는 방식으로, 주로 파일로 대용량 데이터를 공유해야 할 경우 사용한다.

</br>

**소켓**

네트워크 소켓 통신을 통해 데이터를 공유한다. 클라이언트와 서버가 소켓을 통해서 통신하는 구조로, 원격에서 프로세스 간 데이터를 공유할 때 사용한다.
