# 경쟁 상태 (Race Condition)

공유 자원에 대해 여러 프로세스가 동시에 접근 할 때, 결과값에 영향을 줄 수 있는 상태이다.

</br>
</br>

### Race Condition 발생하는 이유

**커널 작업을 수행하는 중에 인터럽트 발생**

커널모드에서 데이터를 로드하여 작업을 수행하다가 인터럽트가 발생하여 같은 데이터를 조작하는 경우에 발생할 수 있다.

- 해결법 : 커널모드에서 작업을 수행하는 동안, 인터럽트를 disable 시켜 인터럽트가 CPU 제어권을 가져가지 못하도록 한다.

> 커널 : 컴퓨터 자원을 효율적으로 관리하기 위해서 CPU 스케줄링, 메모리관리, 입출력관리, 파일시스템 관리 등의 업무 수행
>
> 커널 모드 : 모든 자원 (드라이버, 메모리, CPU)에 접근, 명령할 수 있는 것

</br>

**프로세스가 시스템 콜을 하여 커널모드로 진입해서 작업을 수행하는 도중에 문맥 교환이 발생**

프로세스1이 커널모드에서 데이터를 조작하던 도중 시간이 초과되어 CPU제어권이 프로세스2로 넘어가서 같은 데이터를 조작하는 경우에 발생한다.

- 해결법 : 프로세스가 커널모드에서 작업을 하는 경우에는 시간이 초과되더라도 CPU 제어권이 다른 프로세스에게 넘어가지 않도록 한다.

</br>

**멀티 프로세서에서 공유 메모리 내의 커널 데이터에 접근할 경우**

멀티프로세스 환경에서 2개의 CPU가 동시에 커널 내부의 공유 데이터에 접근하여 조작하는 경우에 발생한다.

- 해결법 : 커널 내부에 있는 각 공유 데이터에 접근할 때마다 그 데이터에 대해 lock/unlock함으로써 해결할 수 있다.
