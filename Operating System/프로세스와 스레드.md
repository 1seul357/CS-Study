# 프로세스와 스레드

### 🖱 운영체제 (OS, Operating System)

사용자의 하드웨어, 시스템 리소스를 제어하고 프로그램에 대한 일반적인 서비스를 지원하는 시스템 소프트웨어이다. 응용 프로그램과 하드웨어 간의 인터페이스로써 다른 응용 프로그램이 유용한 작업을 할 수 있도록 환경을 제공한다. 즉, 운영체제는 사용자가 컴퓨터를 편리하고 효과적으로 사용할 수 있도록 환경을 제공하는 시스템 소프트웨어라고 할 수 있다.

</br>

</br>

### 프로세스

프로그램을 메모리 상에서 실행중인 작업. 프로세스마다 최소 한개의 스레드를 소유하고 있다.

**프로세스는 각각 별도의 주소공간 할당**

- Code : 코드 자체를 구성하는 메모리 영역 (프로그램 명령)
- Data : 전역변수, 정적변수, 배열 등
  - 초기화된 데이터는 data 영역에 저장
  - 초기화되지 않은 데이터는 bss 영역에 저장
- Heap : 동적 할당 시 사용
- Stack : 지역변수, 매개변수, 리턴 값

</br>

</br>

### 스레드

프로세스 안에서 실행되는 여러 흐름 단위. 프로세스는 자신만의 고유 공간과 자원을 할당받아 사용하는데, 스레드는 다른 스레드와 공간, 자원을 공유하면서 사용한다. 

**사용하는 이유**

- 스택만 따로 할당받고, 코드/데이터/힙 등의 자원을 공유
  - 메모리 절약
  - 통신 비용 절감
- 오버헤드 절감
- 프로세스보다 생성 및 종료 시간 짧음

</br>

</br>

### 멀티프로세스

하나의 컴퓨터에 여러 CPU를 장착하고, 하나 이상의 프로세스들을 동시에 처리(병렬)하는 것이다. 

**장점**

- 안정성 (메모리 침범 문제 해결)
- 하나의 프로세스가 죽더라도 다른 프로세스에 영향을 주지 않음

**단점** 

- 각각 독립된 메모리 영역을 갖고 있어서 작업량이 많을수록 오버헤드가 발생한다. 

- Context Switching으로 인한 오버헤드가 발생할 수 있다.
  - 프로세스는 각각의 독립된 메모리 영역을 할당받았기 때문에 프로세스 사이에서 공유하는 메모리가 없다. 그러므로 Context Switching이 발생하면 캐시에 있는 모든 데이터를 모두 리셋하고 다시 캐시 정보를 불러와야 한다.
  
- 메모리 공간과 CPU 시간을 많이 차지한다.

  > 오버헤드
  >
  > : 어떤 처리를 하기 위해 들어가는 간접적인 처리 시간과 메모리 등을 말한다. 예를 들어서 A라는 처리를 단순하게 실행하면 10초 걸리는데, 안전성을 고려하여 B라는 추가 작업을 처리한 결과 15초가 걸린다면 오버헤드는 5초가 된다.
  >
  > Context Switching
  >
  > : 하나의 프로세스가 CPU를 사용 중인 상태에서 다른 프로세스가 CPU를 사용하도록 하기 위해, 이전의 프로세스의 상태를 보관하고 새로운 프로세스의 상태를 적재하는 작업이다. 프로세스는 각 독립된 메모리 영역을 할당받아서 사용하므로, 캐시 메모리 초기화같은 작업이 진행되었을 때 오버헤드가 발생할 수 있다.

</br>

</br>

### 멀티스레드

하나의 응용 프로그램에서 여러 스레드를 구성하여 각 스레드가 하나의 작업을 처리하는 것이다. 스레드들이 공유 메모리를 통해 다수의 작업을 동시에 처리하도록 해준다.

**장점**

- 멀티 프로세스보다 적은 메모리 공간을 차지한다.
- 자신이 속한 프로세스의 자원들과 메모리를 공유한다.
- Context Switch가 빠르다.
  - 문맥 교환시 캐시 메모리 초기화 등의 작업이 필요 없기 때문이다. (자원을 공유하기 때문)

**단점** 

- 안전성 문제. 하나의 스레드가 데이터 공간에 문제를 일으키면 모든 스레드가 작동 불능 상태가 된다. (스레드간의 자원을 공유하기 때문)

